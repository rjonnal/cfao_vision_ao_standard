# AO for Vision Science Workshop (Ravi's notes)

## CfAO Fall Retreat, 9-10 November 2019, Lake Arrowhead, CA

### Saturday morning session: ophthalmic WS and AO assembly and design

SB: consider the range of angles and defocus you need, and select components; put the largest angle components closest to the eye; order compnents based on desired magnifications and distances; working from a rough design, then build system and adjust positions and angles as necessary.

SB/AD: consider beam vergences over all use cases--axial diversity in object (due, e.g., to disease) or chromatic diversity, all of which contribute to vergence diversity

DTM: design for one wavelength, center wavelength

RJZ: optimization in Zemax using one wavelength

DTM: important to verify that pupil plane error agrees with Zemax predictions; added separate pupil plane point source to verify that the wavefront in retina planes is good

OM: we never use stock optomechanical components; we build those with 10x better tolerances than stock components; 

DTM: SB steers imaging beam with big mirror; why hasn't anyone else done it?

SB: major problem is big (costly) mirror collecting dust; to clean, we use air or distilled water to clean them periodically; diameter is 9 inches

JT: does the beam rotate when steering?

SB: if everything is orthogonal, you can minimize rotation; hit the first and second mirrors at right angles

CG: how often do you have to recalibrate?

SB: because it's telecentric, we can measure 3 points and then linearly transform the scan coordinates into retinal coordinates

AD: any special specifications for AO-OCT?

RJZ: don't use dielectric coatings because of dispersion

RSJ: custom achromatizing lenses for broadband sources

RJZ: reference arm should contain optics similar to sample channel

AD: how do you decide how much to weight the beam quality in retina vs. pupil planes?

SB: the pupil plane is more important because you can't correct aberrations in the retina plane w/o an additional DM

AD: do you look at every pupil plane or just SHWS, DM, and eye?

DTM: we look at scanner planes as well

AD: why do we care about planes other than those three? SHWS has to see what's happening at the DM and eye. You can compensate for other pupil planes.

SB/SS: [astigmatism/vignetting]

RJZ: we only look at wander at the plane of the eye

AD: SB's suggestion to order elements according to angluar diversity they generate, and put the highest angle elements closest to the eye; DM over +/- 10 D generates more angle than scan angles generated by scanners

SB: we have a defocus bias between DM and steering mirrors to minimize actuator stroke for mild myopia

JT: prescription is also disease-dependent, so ideal bias may depend on your scientific goals

AD: we use wavefront RMS for optical quality; does anyone use anything else?

RJZ: beam wander

SS: spot size, related to beam wander; different metrics are useful in different cases

SB: but MTF and pupil function are transformations of one another

RSJ: true, but not true for single figures of merit derived from these; could we use specific bands in MTF as closed loop figures of merit or design figures of merit?

AD: how do optical designers in other fields prioritize different portions of the spatial frequency spectrum?

SB/AD: if we're below the diffraction limit, all these figures of merit are probably good

ND: do people calibrate WS by measuring RMS as function of power?

All: no

RJZ: we increased density for mouse eye to reduce scattering

AD: smaller, denser arrays increase tolerance for lateral alignment of DM and SHWS; also, smaller lenslets reduce Stiles-Crawford nonuniformity across lenslet and reduce associated error

---------

### Saturday afternoon session: general discussion

OM: pyramid better for low amplitude aberrations, SH better for high amplitude (b/c pyramic response nonlinear for large phase amplitude); pyramid can be modulated (rotated) to improve its dynamic range; pyramid can get by with fewer photons because you only have 4 ROIs.

AD: how would the presence of multiple retinal layers with relative defocus among them manifest in the pyramid WS?

AD/DTM/RJZ/JT: discussion of deconvolution

AD: we should have better cone detection algorithms

AD: why are we increasing the diffraction-limited scan range but continuing to image 1-2 deg. patches? is it overkill? as we decrease the resonant scanner width and image smaller patches, the AO performance goes up.

AD/DTM/RJZ: discussion of isoplanatic patch size; AD proposed beacon modulation as a way to measure field-dependence of aberrations

----------

### Sunday morning session: AO calibration

SB: Centroiding: find brightest, choose ROI, subpixel COM, lenslets filtered based on image quality

DTM: What is the best figure of merit?

AD: Working on paper testing multiple algorithms

DTM: COM accuracy is the best figure of merit

SB/DTM: Figure of merit has to be patients

SB: reference calibration: put a bare fiber tip about 4 m, couple into SHWS beam w/ 2 fold mirrors (right angle reflections) and then off the pellicle onto the SHWS; collect a single image

SB: poke matrix: poke one direction, one value; bare fiber @ 3 meter distance; one fold mirror to copule into the system

LY: image sharpening during reference calibration; first used sharpness, next used brightness through small pinhole; standard poke (double pass); zonal control w/ leaky integrator; gain optimized per subject; 

AD: double pass is blind to tip/tilt

ER: double pass didn't work very well for us; what you use for model eye is probably important; PSI spins a piece of paper

LY: we do it while scanning

ND: we use the fixation target beamsplitter for launching collimated poke beam

SB: we use single pass b/c we can fill our wells better; I don't think the tip/tilt issue is important

SB: if you use a small beacon in the pupil, your double pass problems will be worse b/c the beacon may sit on the edge of one actuator

NB: first calibration step is take the sensor out and measure plate scale of the system by horizontal translation of a fiber tip behind a fixed collimating lens

AD: NCPA--sharpness metric (standard image sharpness); zonal and modal basis sets; for OCT (one fiber), intensity and sharpness are the same; this is not true for SLO


### Sunday morning session: AO Control and Operation

AD: standard loop with gain of 0.9 and loss (bleed) of 0.0

JT: sometimes we reduce speed to effectively reduce gain w/ patients

AD/RSJ/SB: we reinvert poke matrix on the fly to handle missing or noisy subapertures

Yuriy: we do this as well, and also turn off actuators underlying missing spots to prevent them from being driven by low SNR lenslets far from the actuator

SB: Tikhonov regularization (add small amount to each poke measurement before inverting to avoid blowing up)


LY: Laura Young
SB: Steve Burns
AD: Alf Dubra
DTM: Don Miller
RJZ: Robert Zawadzki
OM: Olivier Martin
JT: Johnny Tam
CG: Charlie Granger
RSJ: Ravi Jonnal
SS: Sam Steven


